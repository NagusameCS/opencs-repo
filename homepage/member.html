<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Member - OpenCS</title>
    <meta name="description" id="page-desc" content="Developer profile on OpenCS">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@400" rel="stylesheet">
    <script src="/backgrounds.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #22c55e;
            --bg: #000000;
            --bg-secondary: #111111;
            --text: #ffffff;
            --text-muted: #888888;
            --border: #333333;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 5px;
            border: 2px solid var(--bg);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #16a34a;
        }

        /* Firefox scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: var(--primary) var(--bg);
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Default background container */
        #artist-bg-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
        }

        /* Fallback tessellation background */
        .tessellation-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 200%;
            height: 200%;
            z-index: -1;
            opacity: 0.04;
            background-image: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h40v40H0zM40 40h40v40H40z' fill='%23fff' fill-opacity='0.4'/%3E%3Cpath d='M40 0h40v40H40zM0 40h40v40H0z' fill='%23fff' fill-opacity='0.2'/%3E%3C/svg%3E");
            background-size: 80px 80px;
            animation: tessellate 60s linear infinite;
        }

        .tessellation-bg.hidden {
            display: none;
        }

        @keyframes tessellate {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-80px, -80px); }
        }

        /* Cat silhouettes floating */
        .floating-cat {
            position: fixed;
            pointer-events: none;
            opacity: 0.05;
            animation: float-cat 20s ease-in-out infinite;
        }

        .cat-1 { top: 10%; left: 5%; animation-delay: 0s; }
        .cat-2 { top: 60%; right: 5%; animation-delay: -5s; }
        .cat-3 { bottom: 10%; left: 20%; animation-delay: -10s; }

        @keyframes float-cat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(5deg); }
            75% { transform: translateY(20px) rotate(-5deg); }
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 1.5rem 3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            background: linear-gradient(to bottom, var(--bg), transparent);
        }

        .back-link {
            color: var(--text-muted);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            transition: color 0.2s;
        }

        .back-link:hover {
            color: var(--primary);
        }

        .socials {
            display: flex;
            gap: 0.5rem;
        }

        .social-link {
            display: flex;
            align-items: center;
            gap: 0;
            color: var(--text-muted);
            text-decoration: none;
            padding: 0.5rem;
            border-radius: 8px;
            background: rgba(255,255,255,0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            max-width: 40px;
        }

        .social-link svg {
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .social-link .social-name {
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            max-width: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding-left: 0;
        }

        .social-link:hover {
            color: var(--primary);
            background: rgba(34, 197, 94, 0.1);
            max-width: 200px;
            gap: 0.5rem;
        }

        .social-link:hover .social-name {
            opacity: 1;
            max-width: 100px;
            padding-left: 0.25rem;
        }

        /* Main content */
        main {
            min-height: 100vh;
            padding: 8rem 2rem 4rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Profile section */
        .profile {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 3rem;
            margin-bottom: 4rem;
            align-items: start;
        }

        .avatar-container {
            position: relative;
        }

        .avatar {
            width: 200px;
            height: 200px;
            border-radius: 16px;
            object-fit: cover;
            border: 3px solid var(--border);
            transition: all 0.3s;
        }

        .avatar:hover {
            border-color: var(--primary);
            transform: scale(1.02);
        }

        .profile-info h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--text) 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .username {
            color: var(--text-muted);
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
        }

        .bio {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--text);
            margin-bottom: 2rem;
        }

        .stats {
            display: flex;
            gap: 2rem;
        }

        .stat {
            text-align: center;
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Sections */
        .section {
            margin-bottom: 4rem;
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .section-title::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
        }

        /* README Content */
        .readme-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            line-height: 1.7;
            font-size: 0.95rem;
        }

        .readme-content h1,
        .readme-content h2,
        .readme-content h3,
        .readme-content h4 {
            margin: 1.5rem 0 1rem;
            font-weight: 600;
        }

        .readme-content h1:first-child,
        .readme-content h2:first-child {
            margin-top: 0;
        }

        .readme-content h1 { font-size: 1.5rem; border-bottom: 1px solid var(--border); padding-bottom: 0.5rem; }
        .readme-content h2 { font-size: 1.3rem; border-bottom: 1px solid var(--border); padding-bottom: 0.5rem; }
        .readme-content h3 { font-size: 1.1rem; }

        .readme-content p {
            margin: 1rem 0;
        }

        .readme-content a {
            color: var(--primary);
            text-decoration: none;
        }

        .readme-content a:hover {
            text-decoration: underline;
        }

        .readme-content code {
            font-family: 'JetBrains Mono', monospace;
            background: rgba(255,255,255,0.1);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-size: 0.85em;
        }

        .readme-content pre {
            background: rgba(0,0,0,0.5);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .readme-content pre code {
            background: none;
            padding: 0;
        }

        .readme-content ul,
        .readme-content ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        .readme-content li {
            margin: 0.5rem 0;
        }

        .readme-content blockquote {
            border-left: 3px solid var(--primary);
            padding-left: 1rem;
            margin: 1rem 0;
            color: var(--text-muted);
        }

        .readme-content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .readme-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .readme-content th,
        .readme-content td {
            border: 1px solid var(--border);
            padding: 0.75rem;
            text-align: left;
        }

        .readme-content th {
            background: rgba(255,255,255,0.05);
        }

        /* Repo grid */
        .repo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .repo-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            text-decoration: none;
            color: inherit;
            transition: all 0.2s;
            position: relative;
        }

        .repo-card:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .repo-card.hosted::before {
            content: 'HOSTED';
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 0.7rem;
            background: var(--primary);
            color: #000;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .repo-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-family: 'JetBrains Mono', monospace;
        }

        .repo-desc {
            color: var(--text-muted);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .repo-meta {
            display: flex;
            gap: 1rem;
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        .repo-meta span {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        /* Footer */
        footer {
            padding: 4rem 2rem;
            text-align: center;
            border-top: 1px solid var(--border);
        }

        footer p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 4rem;
            color: var(--text-muted);
        }
        
        /* Contribution Calendar */
        .contribution-calendar {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            overflow-x: auto;
        }
        
        .calendar-grid {
            display: flex;
            gap: 3px;
        }
        
        .calendar-week {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }
        
        .calendar-day {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            background: rgba(255,255,255,0.05);
            transition: all 0.2s;
        }
        
        .calendar-day:hover {
            transform: scale(1.3);
            z-index: 10;
        }
        
        .calendar-day.level-0 { background: rgba(255,255,255,0.05); }
        .calendar-day.level-1 { background: color-mix(in srgb, var(--primary) 25%, transparent); }
        .calendar-day.level-2 { background: color-mix(in srgb, var(--primary) 50%, transparent); }
        .calendar-day.level-3 { background: color-mix(in srgb, var(--primary) 75%, transparent); }
        .calendar-day.level-4 { background: var(--primary); }
        
        .calendar-months {
            display: flex;
            gap: 3px;
            margin-bottom: 0.5rem;
            font-size: 0.7rem;
            color: var(--text-muted);
        }
        
        .calendar-month {
            width: calc(12px * 4 + 3px * 3);
            text-align: center;
        }
        
        .calendar-legend {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            justify-content: flex-end;
            margin-top: 0.75rem;
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        
        .legend-squares {
            display: flex;
            gap: 2px;
        }
        
        .legend-square {
            width: 10px;
            height: 10px;
            border-radius: 2px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .profile {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .avatar-container {
                justify-self: center;
            }

            .stats {
                justify-content: center;
            }

            .profile-info h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Artist Background Container -->
    <div id="artist-bg-container"></div>
    
    <!-- Fallback Background -->
    <div class="tessellation-bg" id="fallback-bg"></div>
    
    <!-- Cat silhouettes -->
    <svg class="floating-cat cat-1" width="80" height="60" viewBox="0 0 80 60" fill="currentColor">
        <path d="M10 30 Q20 10 30 25 L40 20 L50 25 Q60 10 70 30 Q75 50 40 55 Q5 50 10 30 Z"/>
        <circle cx="25" cy="32" r="3"/>
        <circle cx="55" cy="32" r="3"/>
        <path d="M38 38 L40 40 L42 38" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    
    <svg class="floating-cat cat-2" width="60" height="45" viewBox="0 0 80 60" fill="currentColor">
        <path d="M10 30 Q20 10 30 25 L40 20 L50 25 Q60 10 70 30 Q75 50 40 55 Q5 50 10 30 Z"/>
        <circle cx="25" cy="32" r="3"/>
        <circle cx="55" cy="32" r="3"/>
        <path d="M38 38 L40 40 L42 38" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    
    <svg class="floating-cat cat-3" width="50" height="38" viewBox="0 0 80 60" fill="currentColor">
        <path d="M10 30 Q20 10 30 25 L40 20 L50 25 Q60 10 70 30 Q75 50 40 55 Q5 50 10 30 Z"/>
        <circle cx="25" cy="32" r="3"/>
        <circle cx="55" cy="32" r="3"/>
        <path d="M38 38 L40 40 L42 38" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>

    <!-- Header -->
    <header>
        <a href="/" class="back-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19L5 12L12 5"/>
            </svg>
            Back to OpenCS
        </a>
        <div class="socials" id="socials"></div>
    </header>

    <!-- Main -->
    <main>
        <section class="profile">
            <div class="avatar-container">
                <img id="avatar" class="avatar" src="" alt="Profile picture">
            </div>
            <div class="profile-info">
                <h1 id="display-name">Loading...</h1>
                <div class="username" id="username">@...</div>
                <p class="bio" id="bio"></p>
                <div class="stats">
                    <div class="stat">
                        <div class="stat-value" id="repo-count">-</div>
                        <div class="stat-label">Repos</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="followers-count">-</div>
                        <div class="stat-label">Followers</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="packages-count">-</div>
                        <div class="stat-label">Packages</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section" id="readme-section" style="display:none;">
            <h2 class="section-title">About</h2>
            <div class="readme-content" id="readme-content"></div>
        </section>

        <section class="section">
            <h2 class="section-title">Repositories</h2>
            <div class="repo-grid" id="repo-grid">
                <div class="loading">Loading repositories...</div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>Part of <a href="/" style="color:var(--primary)">OpenCS</a></p>
    </footer>

    <script>
        // Get username from URL
        const path = window.location.pathname;
        const username = path.split('/').filter(Boolean)[0];

        async function loadMember() {
            try {
                const res = await fetch(`/portal/api/public/member/${username}`);
                if (!res.ok) throw new Error('Member not found');
                
                const member = await res.json();
                
                // Update page
                document.title = `${member.displayName || member.username} - OpenCS`;
                document.getElementById('page-desc').content = member.bio || `${member.username}'s profile on OpenCS`;
                
                document.getElementById('avatar').src = member.avatar;
                document.getElementById('display-name').textContent = member.displayName || member.username;
                document.getElementById('username').textContent = `@${member.username}`;
                document.getElementById('bio').textContent = member.bio || '';
                
                // Apply theme if set
                if (member.theme) {
                    if (member.theme.primary) {
                        document.documentElement.style.setProperty('--primary', member.theme.primary);
                    }
                    if (member.theme.background) {
                        document.documentElement.style.setProperty('--bg', member.theme.background);
                    }
                }
                
                // Apply artist background if set
                if (member.artistBackground && typeof initArtistBackground === 'function') {
                    const container = document.getElementById('artist-bg-container');
                    const accentColor = member.theme?.primary || '#22c55e';
                    const success = initArtistBackground(member.artistBackground, container, accentColor);
                    if (success) {
                        // Hide fallback background
                        document.getElementById('fallback-bg').classList.add('hidden');
                    }
                }
                
                // Special styling for NagusameCS page
                if (username.toLowerCase() === 'nagusame' || username.toLowerCase() === 'nagusame') {
                    // Enhanced cat decorations
                    document.querySelectorAll('.floating-cat').forEach((cat, i) => {
                        cat.style.opacity = '0.1';
                        cat.style.animation = `float-cat ${15 + i * 3}s ease-in-out infinite`;
                    });
                    
                    // Add more cat decorations
                    const catContainer = document.createElement('div');
                    catContainer.className = 'extra-cats';
                    catContainer.innerHTML = `
                        <svg class="floating-cat" style="top:30%;right:15%;width:70px;opacity:0.08;animation:float-cat 18s ease-in-out infinite -3s" viewBox="0 0 80 60" fill="currentColor">
                            <path d="M10 30 Q20 10 30 25 L40 20 L50 25 Q60 10 70 30 Q75 50 40 55 Q5 50 10 30 Z"/>
                            <circle cx="25" cy="32" r="3"/>
                            <circle cx="55" cy="32" r="3"/>
                        </svg>
                        <svg class="floating-cat" style="bottom:25%;right:25%;width:55px;opacity:0.06;animation:float-cat 22s ease-in-out infinite -8s" viewBox="0 0 80 60" fill="currentColor">
                            <path d="M10 30 Q20 10 30 25 L40 20 L50 25 Q60 10 70 30 Q75 50 40 55 Q5 50 10 30 Z"/>
                            <circle cx="25" cy="32" r="3"/>
                            <circle cx="55" cy="32" r="3"/>
                        </svg>
                    `;
                    document.body.appendChild(catContainer);
                }
                
                // Stats
                document.getElementById('repo-count').textContent = member.repos?.length || 0;
                
                // Fetch followers count from GitHub API
                try {
                    const ghRes = await fetch(`https://api.github.com/users/${member.username}`);
                    if (ghRes.ok) {
                        const ghData = await ghRes.json();
                        document.getElementById('followers-count').textContent = ghData.followers || 0;
                    }
                } catch (e) {
                    document.getElementById('followers-count').textContent = '0';
                }
                
                // Fetch NPM packages count
                if (member.npmUsername) {
                    try {
                        const npmRes = await fetch(`https://registry.npmjs.org/-/v1/search?text=maintainer:${member.npmUsername}&size=250`);
                        const npmData = await npmRes.json();
                        document.getElementById('packages-count').textContent = npmData.total || 0;
                    } catch (e) {
                        document.getElementById('packages-count').textContent = '0';
                    }
                } else {
                    document.getElementById('packages-count').textContent = '0';
                }
                
                // Fetch GitHub contributions using the GitHub contributions API proxy
                await loadContributions(member.username);
                
                // Load GitHub profile README if available
                await loadGitHubReadme(member.username);
                
                // Socials - SVG icons with hover animation
                const socialsEl = document.getElementById('socials');
                const socialLinks = [];
                
                // SVG icon definitions
                const socialIcons = {
                    github: '<svg viewBox="0 0 24 24"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.385-1.335-1.755-1.335-1.755-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.605-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 21.795 24 17.295 24 12c0-6.63-5.37-12-12-12"/></svg>',
                    twitter: '<svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>',
                    discord: '<svg viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>',
                    website: '<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>',
                    npm: '<svg viewBox="0 0 24 24"><path fill="#cb3837" d="M0 0v24h24V0H0zm19.2 19.2H12v-9.6H7.2v9.6H4.8V4.8h14.4v14.4z"/></svg>',
                    linkedin: '<svg viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>',
                    youtube: '<svg viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>',
                    twitch: '<svg viewBox="0 0 24 24"><path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714z"/></svg>',
                    instagram: '<svg viewBox="0 0 24 24"><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg>',
                    tiktok: '<svg viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>',
                    reddit: '<svg viewBox="0 0 24 24"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>',
                    spotify: '<svg viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>',
                    mastodon: '<svg viewBox="0 0 24 24"><path d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z"/></svg>',
                    bluesky: '<svg viewBox="0 0 24 24"><path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8z"/></svg>',
                    kofi: '<svg viewBox="0 0 24 24"><path d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604 0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.034-3.954-.709-.965-1.041-2.7-.091-3.71.951-1.01 3.005-1.086 4.363.407 0 0 1.565-1.782 3.468-.963 1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z"/></svg>',
                    patreon: '<svg viewBox="0 0 24 24"><path d="M15.386.524c-4.764 0-8.64 3.876-8.64 8.64 0 4.75 3.876 8.613 8.64 8.613 4.75 0 8.614-3.864 8.614-8.613C24 4.4 20.136.524 15.386.524zM.003 23.537h4.22V.524H.003z"/></svg>',
                    email: '<svg viewBox="0 0 24 24"><path d="M1.5 8.67v8.58a3 3 0 003 3h15a3 3 0 003-3V8.67l-8.928 5.493a3 3 0 01-3.144 0L1.5 8.67z"/><path d="M22.5 6.908V6.75a3 3 0 00-3-3h-15a3 3 0 00-3 3v.158l9.714 5.978a1.5 1.5 0 001.572 0L22.5 6.908z"/></svg>',
                    steam: '<svg viewBox="0 0 24 24"><path d="M11.979 0C5.678 0 .511 4.86.022 11.037l6.432 2.658c.545-.371 1.203-.59 1.912-.59.063 0 .125.004.188.006l2.861-4.142V8.91c0-2.495 2.028-4.524 4.524-4.524 2.494 0 4.524 2.031 4.524 4.527s-2.03 4.525-4.524 4.525h-.105l-4.076 2.911c0 .052.004.105.004.159 0 1.875-1.515 3.396-3.39 3.396-1.635 0-3.016-1.173-3.331-2.727L.436 15.27C1.862 20.307 6.486 24 11.979 24c6.627 0 11.999-5.373 11.999-12S18.605 0 11.979 0zM7.54 18.21l-1.473-.61c.262.543.714.999 1.314 1.25 1.297.539 2.793-.076 3.332-1.375.263-.63.264-1.319.005-1.949s-.75-1.121-1.377-1.383c-.624-.26-1.29-.249-1.878-.03l1.523.63c.956.4 1.409 1.5 1.009 2.455-.397.957-1.497 1.41-2.454 1.012H7.54zm11.415-9.303c0-1.662-1.353-3.015-3.015-3.015-1.665 0-3.015 1.353-3.015 3.015 0 1.665 1.35 3.015 3.015 3.015 1.663 0 3.015-1.35 3.015-3.015zm-5.273-.005c0-1.252 1.013-2.266 2.265-2.266 1.249 0 2.266 1.014 2.266 2.266 0 1.251-1.017 2.265-2.266 2.265-1.253 0-2.265-1.014-2.265-2.265z"/></svg>'
                };
                
                if (member.username) {
                    socialLinks.push(`<a href="https://github.com/${member.username}" target="_blank" class="social-link">${socialIcons.github}<span class="social-name">GitHub</span></a>`);
                }
                
                if (member.socials?.twitter) {
                    socialLinks.push(`<a href="https://twitter.com/${member.socials.twitter}" target="_blank" class="social-link">${socialIcons.twitter}<span class="social-name">Twitter</span></a>`);
                }
                
                if (member.socials?.bluesky) {
                    socialLinks.push(`<a href="https://bsky.app/profile/${member.socials.bluesky}" target="_blank" class="social-link">${socialIcons.bluesky}<span class="social-name">Bluesky</span></a>`);
                }
                
                if (member.socials?.mastodon) {
                    socialLinks.push(`<a href="${member.socials.mastodon}" target="_blank" class="social-link">${socialIcons.mastodon}<span class="social-name">Mastodon</span></a>`);
                }
                
                if (member.socials?.discord) {
                    socialLinks.push(`<span class="social-link" style="cursor:pointer" onclick="navigator.clipboard.writeText('${member.socials.discord}');alert('Discord copied!')">${socialIcons.discord}<span class="social-name">${member.socials.discord}</span></span>`);
                }
                
                if (member.socials?.linkedin) {
                    socialLinks.push(`<a href="https://linkedin.com/in/${member.socials.linkedin}" target="_blank" class="social-link">${socialIcons.linkedin}<span class="social-name">LinkedIn</span></a>`);
                }
                
                if (member.socials?.youtube) {
                    socialLinks.push(`<a href="https://youtube.com/@${member.socials.youtube}" target="_blank" class="social-link">${socialIcons.youtube}<span class="social-name">YouTube</span></a>`);
                }
                
                if (member.socials?.twitch) {
                    socialLinks.push(`<a href="https://twitch.tv/${member.socials.twitch}" target="_blank" class="social-link">${socialIcons.twitch}<span class="social-name">Twitch</span></a>`);
                }
                
                if (member.socials?.instagram) {
                    socialLinks.push(`<a href="https://instagram.com/${member.socials.instagram}" target="_blank" class="social-link">${socialIcons.instagram}<span class="social-name">Instagram</span></a>`);
                }
                
                if (member.socials?.tiktok) {
                    socialLinks.push(`<a href="https://tiktok.com/@${member.socials.tiktok}" target="_blank" class="social-link">${socialIcons.tiktok}<span class="social-name">TikTok</span></a>`);
                }
                
                if (member.socials?.reddit) {
                    socialLinks.push(`<a href="https://reddit.com/user/${member.socials.reddit}" target="_blank" class="social-link">${socialIcons.reddit}<span class="social-name">Reddit</span></a>`);
                }
                
                if (member.socials?.spotify) {
                    socialLinks.push(`<a href="https://open.spotify.com/user/${member.socials.spotify}" target="_blank" class="social-link">${socialIcons.spotify}<span class="social-name">Spotify</span></a>`);
                }
                
                if (member.socials?.steam) {
                    socialLinks.push(`<a href="https://steamcommunity.com/id/${member.socials.steam}" target="_blank" class="social-link">${socialIcons.steam}<span class="social-name">Steam</span></a>`);
                }
                
                if (member.socials?.kofi) {
                    socialLinks.push(`<a href="https://ko-fi.com/${member.socials.kofi}" target="_blank" class="social-link">${socialIcons.kofi}<span class="social-name">Ko-fi</span></a>`);
                }
                
                if (member.socials?.patreon) {
                    socialLinks.push(`<a href="https://patreon.com/${member.socials.patreon}" target="_blank" class="social-link">${socialIcons.patreon}<span class="social-name">Patreon</span></a>`);
                }
                
                if (member.socials?.email) {
                    socialLinks.push(`<a href="mailto:${member.socials.email}" class="social-link">${socialIcons.email}<span class="social-name">Email</span></a>`);
                }
                
                if (member.socials?.website) {
                    socialLinks.push(`<a href="${member.socials.website}" target="_blank" class="social-link">${socialIcons.website}<span class="social-name">Website</span></a>`);
                }
                
                if (member.npmUsername) {
                    socialLinks.push(`<a href="https://www.npmjs.com/~${member.npmUsername}" target="_blank" class="social-link">${socialIcons.npm}<span class="social-name">NPM</span></a>`);
                }
                
                socialsEl.innerHTML = socialLinks.join('');
                
                // Repos
                const repoGrid = document.getElementById('repo-grid');
                const allRepos = [];
                
                // Add hosted repos
                (member.hostedRepos || []).forEach(r => {
                    allRepos.push({
                        name: r,
                        hosted: true,
                        url: `/${username}/${r}`
                    });
                });
                
                // Fetch from GitHub
                try {
                    const ghRes = await fetch(`https://api.github.com/users/${member.username}/repos?sort=updated&per_page=20`);
                    const ghRepos = await ghRes.json();
                    
                    if (Array.isArray(ghRepos)) {
                        ghRepos.forEach(r => {
                            const existing = allRepos.find(er => er.name === r.name);
                            if (existing) {
                                existing.description = r.description;
                                existing.stars = r.stargazers_count;
                                existing.language = r.language;
                                existing.ghUrl = r.html_url;
                            } else {
                                allRepos.push({
                                    name: r.name,
                                    hosted: false,
                                    description: r.description,
                                    stars: r.stargazers_count,
                                    language: r.language,
                                    url: r.html_url
                                });
                            }
                        });
                    }
                } catch (e) {
                    console.log('Could not fetch GitHub repos');
                }
                
                if (allRepos.length === 0) {
                    repoGrid.innerHTML = '<p style="color:var(--text-muted)">No repositories yet</p>';
                } else {
                    repoGrid.innerHTML = allRepos.map(r => `
                        <a href="${r.url}" ${r.hosted ? '' : 'target="_blank"'} class="repo-card ${r.hosted ? 'hosted' : ''}">
                            <div class="repo-name">${r.name}</div>
                            <div class="repo-desc">${r.description || 'No description'}</div>
                            <div class="repo-meta">
                                ${r.language ? `<span>${r.language}</span>` : ''}
                                ${r.stars ? `<span><span class="material-symbols-outlined" style="font-size:14px;vertical-align:middle">star</span> ${r.stars}</span>` : ''}
                            </div>
                        </a>
                    `).join('');
                }
                
            } catch (err) {
                console.error('Failed to load member:', err);
                document.getElementById('display-name').textContent = 'Not Found';
                document.getElementById('username').textContent = '';
                document.getElementById('bio').textContent = 'This member does not exist.';
            }
        }
        
        // Load GitHub profile README
        async function loadGitHubReadme(githubUsername) {
            try {
                // Try to fetch the user's profile README (username/username repo)
                const readmeRes = await fetch(`https://api.github.com/repos/${githubUsername}/${githubUsername}/readme`, {
                    headers: { 'Accept': 'application/vnd.github.v3.html' }
                });
                
                if (!readmeRes.ok) return;
                
                const readmeHtml = await readmeRes.text();
                if (readmeHtml && readmeHtml.trim()) {
                    document.getElementById('readme-content').innerHTML = readmeHtml;
                    document.getElementById('readme-section').style.display = 'block';
                }
            } catch (e) {
                console.log('Could not load profile README:', e);
            }
        }
        
        // Load GitHub contribution calendar
        async function loadContributions(githubUsername) {
            try {
                // Use a CORS-friendly GitHub contributions scraper endpoint
                // We'll generate synthetic data based on recent commits
                const eventsRes = await fetch(`https://api.github.com/users/${githubUsername}/events/public?per_page=100`);
                const events = await eventsRes.json();
                
                if (!Array.isArray(events)) {
                    return;
                }
                
                // Count commits from push events
                const contributions = {};
                const oneYearAgo = new Date();
                oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
                
                events.forEach(event => {
                    if (event.type === 'PushEvent') {
                        const date = event.created_at.split('T')[0];
                        const commits = event.payload?.commits?.length || 0;
                        contributions[date] = (contributions[date] || 0) + commits;
                    }
                });
                
                // Generate calendar
                renderContributionCalendar(contributions);
                document.getElementById('contributions-section').style.display = 'block';
                
            } catch (e) {
                console.log('Could not load contributions:', e);
            }
        }
        
        function renderContributionCalendar(contributions) {
            const calendar = document.getElementById('contribution-calendar');
            const today = new Date();
            const oneYearAgo = new Date(today);
            oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
            
            // Find max for levels
            const values = Object.values(contributions);
            const maxContrib = Math.max(...values, 1);
            
            // Generate weeks
            let html = '<div class="calendar-grid">';
            let currentDate = new Date(oneYearAgo);
            
            // Adjust to start on Sunday
            currentDate.setDate(currentDate.getDate() - currentDate.getDay());
            
            while (currentDate <= today) {
                html += '<div class="calendar-week">';
                for (let day = 0; day < 7; day++) {
                    if (currentDate <= today && currentDate >= oneYearAgo) {
                        const dateStr = currentDate.toISOString().split('T')[0];
                        const count = contributions[dateStr] || 0;
                        let level = 0;
                        if (count > 0) level = 1;
                        if (count > maxContrib * 0.25) level = 2;
                        if (count > maxContrib * 0.5) level = 3;
                        if (count > maxContrib * 0.75) level = 4;
                        
                        const tooltip = `${dateStr}: ${count} contribution${count !== 1 ? 's' : ''}`;
                        html += `<div class="calendar-day level-${level}" title="${tooltip}"></div>`;
                    } else {
                        html += '<div class="calendar-day" style="visibility:hidden"></div>';
                    }
                    currentDate.setDate(currentDate.getDate() + 1);
                }
                html += '</div>';
            }
            html += '</div>';
            
            // Add legend
            html += `
                <div class="calendar-legend">
                    <span>Less</span>
                    <div class="legend-squares">
                        <div class="legend-square level-0 calendar-day"></div>
                        <div class="legend-square level-1 calendar-day"></div>
                        <div class="legend-square level-2 calendar-day"></div>
                        <div class="legend-square level-3 calendar-day"></div>
                        <div class="legend-square level-4 calendar-day"></div>
                    </div>
                    <span>More</span>
                </div>
            `;
            
            calendar.innerHTML = html;
        }
        
        loadMember();
    </script>
</body>
</html>
