<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenCS Portal</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div id="login-screen" class="screen">
        <div class="login-container">
            <div class="login-logo">
                <span class="material-symbols-outlined logo-icon">terminal</span>
            </div>
            <h1>OpenCS Portal</h1>
            <p class="login-subtitle">VPS Management System</p>
            
            <div id="auth-options">
                <button id="passkey-login" class="auth-btn passkey-btn" onclick="loginWithPasskey()">
                    <span class="material-symbols-outlined">fingerprint</span>
                    Sign in with Passkey
                </button>
                
                <div class="divider"><span>or</span></div>
                
                <form id="login-form">
                    <div class="input-group password-group">
                        <span class="material-symbols-outlined">lock</span>
                        <input type="password" id="password" placeholder="Password" required autocomplete="current-password">
                        <span class="material-symbols-outlined password-toggle" id="password-toggle" onmouseenter="showPassword()" onmouseleave="hidePassword()" onclick="togglePassword()">visibility</span>
                    </div>
                    <button type="submit" class="auth-btn">
                        <span class="material-symbols-outlined">login</span>
                        Sign in with Password
                    </button>
                </form>
            </div>
            
            <p id="login-error" class="error"></p>
        </div>
    </div>

    <div id="main-screen" class="screen hidden">
        <nav class="sidebar">
            <div class="logo">
                <span class="material-symbols-outlined logo-symbol">terminal</span>
                <div class="logo-text">
                    <h2>OpenCS</h2>
                    <span class="subtitle">Portal</span>
                </div>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-section="dashboard">
                    <span class="material-symbols-outlined">dashboard</span>
                    <span class="nav-label">Dashboard</span>
                </li>
                <li class="nav-item" data-section="bots">
                    <span class="material-symbols-outlined">smart_toy</span>
                    <span class="nav-label">Bots</span>
                </li>
                <li class="nav-item" data-section="pages">
                    <span class="material-symbols-outlined">web</span>
                    <span class="nav-label">Pages</span>
                </li>
                <li class="nav-item" data-section="files">
                    <span class="material-symbols-outlined">folder</span>
                    <span class="nav-label">Files</span>
                </li>
                <li class="nav-item" data-section="terminal">
                    <span class="material-symbols-outlined">terminal</span>
                    <span class="nav-label">Terminal</span>
                </li>
                <li class="nav-item" data-section="git">
                    <span class="material-symbols-outlined">commit</span>
                    <span class="nav-label">Git</span>
                </li>
                <li class="nav-item" data-section="security">
                    <span class="material-symbols-outlined">shield</span>
                    <span class="nav-label">Security</span>
                </li>
                <li class="nav-item" data-section="devtools">
                    <span class="material-symbols-outlined">handyman</span>
                    <span class="nav-label">Dev Tools</span>
                </li>
                <li class="nav-item" data-section="team">
                    <span class="material-symbols-outlined">group</span>
                    <span class="nav-label">Team</span>
                </li>
                <li class="nav-item" data-section="contacts">
                    <span class="material-symbols-outlined">mail</span>
                    <span class="nav-label">Contacts</span>
                </li>
                <li class="nav-item" data-section="gallery">
                    <span class="material-symbols-outlined">photo_library</span>
                    <span class="nav-label">Gallery</span>
                </li>
                <li class="nav-item" data-section="page-editor">
                    <span class="material-symbols-outlined">edit_document</span>
                    <span class="nav-label">Page Editor</span>
                </li>
                <li class="nav-item" data-section="homepage">
                    <span class="material-symbols-outlined">home</span>
                    <span class="nav-label">Homepage</span>
                </li>
                <li class="nav-item" data-section="settings">
                    <span class="material-symbols-outlined">settings</span>
                    <span class="nav-label">Settings</span>
                </li>
            </ul>
            <div class="nav-footer">
                <div class="user-info" id="user-info">
                    <img id="user-avatar" class="user-avatar" src="" alt="">
                    <span class="user-label" id="user-label">Admin</span>
                </div>
                <button id="logout-btn" title="Logout">
                    <span class="material-symbols-outlined">logout</span>
                </button>
            </div>
        </nav>

        <main class="content">
            <!-- Dashboard -->
            <section id="dashboard" class="section active">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">dashboard</span> Dashboard</h1>
                    <button onclick="loadDashboard()" class="icon-btn" title="Refresh">
                        <span class="material-symbols-outlined">refresh</span>
                    </button>
                </div>
                
                <div class="status-grid">
                    <div class="status-card">
                        <div class="card-icon online">
                            <span class="material-symbols-outlined">dns</span>
                        </div>
                        <div class="card-content">
                            <h3>Server Status</h3>
                            <div id="server-status" class="status-value">Checking...</div>
                        </div>
                    </div>
                    <div class="status-card">
                        <div class="card-icon">
                            <span class="material-symbols-outlined">schedule</span>
                        </div>
                        <div class="card-content">
                            <h3>Uptime</h3>
                            <div id="uptime" class="status-value">--</div>
                        </div>
                    </div>
                    <div class="status-card">
                        <div class="card-icon">
                            <span class="material-symbols-outlined">memory</span>
                        </div>
                        <div class="card-content">
                            <h3>CPU Load</h3>
                            <div id="cpu-load" class="status-value">--</div>
                        </div>
                    </div>
                    <div class="status-card">
                        <div class="card-icon">
                            <span class="material-symbols-outlined">memory_alt</span>
                        </div>
                        <div class="card-content">
                            <h3>Memory</h3>
                            <div id="memory-usage" class="status-value">--</div>
                            <div class="progress-bar"><div id="memory-bar" class="progress"></div></div>
                        </div>
                    </div>
                    <div class="status-card">
                        <div class="card-icon">
                            <span class="material-symbols-outlined">hard_drive</span>
                        </div>
                        <div class="card-content">
                            <h3>Disk</h3>
                            <div id="disk-usage" class="status-value">--</div>
                            <div class="progress-bar"><div id="disk-bar" class="progress"></div></div>
                        </div>
                    </div>
                    <div class="status-card">
                        <div class="card-icon">
                            <span class="material-symbols-outlined">public</span>
                        </div>
                        <div class="card-content">
                            <h3>Nginx</h3>
                            <div id="nginx-status" class="status-value">--</div>
                        </div>
                    </div>
                </div>

                <div class="section-header sub">
                    <h2><span class="material-symbols-outlined">deployed_code</span> Running Processes</h2>
                </div>
                <div id="pm2-list" class="process-list"></div>

                <div class="section-header sub">
                    <h2><span class="material-symbols-outlined">bolt</span> Quick Actions</h2>
                </div>
                <div class="quick-actions">
                    <button onclick="checkUpdates()">
                        <span class="material-symbols-outlined">sync</span>
                        Check Updates
                    </button>
                    <button onclick="restartAllBots()">
                        <span class="material-symbols-outlined">restart_alt</span>
                        Restart All Bots
                    </button>
                    <button onclick="reloadNginx()">
                        <span class="material-symbols-outlined">refresh</span>
                        Reload Nginx
                    </button>
                </div>
            </section>

            <!-- Bots -->
            <section id="bots" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">smart_toy</span> Bot Management</h1>
                    <button class="btn-primary" onclick="showAddBotModal()">
                        <span class="material-symbols-outlined">add</span>
                        Add Bot
                    </button>
                </div>
                <div id="bots-list" class="cards-grid"></div>
            </section>

            <!-- Pages -->
            <section id="pages" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">web</span> Page Management</h1>
                    <button class="btn-primary" onclick="showAddPageModal()">
                        <span class="material-symbols-outlined">add</span>
                        Add Page
                    </button>
                </div>
                <div id="pages-list" class="cards-grid"></div>
            </section>

            <!-- Files -->
            <section id="files" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">folder</span> File Browser</h1>
                </div>
                <div class="file-toolbar">
                    <button onclick="navigateUp()" class="icon-btn" title="Go up">
                        <span class="material-symbols-outlined">arrow_upward</span>
                    </button>
                    <input type="text" id="current-path" readonly>
                    <button onclick="refreshFiles()" class="icon-btn" title="Refresh">
                        <span class="material-symbols-outlined">refresh</span>
                    </button>
                    <button onclick="showNewFolderModal()" class="icon-btn" title="New folder">
                        <span class="material-symbols-outlined">create_new_folder</span>
                    </button>
                    <button onclick="showUploadModal()" class="icon-btn" title="Upload">
                        <span class="material-symbols-outlined">upload</span>
                    </button>
                </div>
                <div id="file-list" class="file-list"></div>
            </section>

            <!-- Terminal -->
            <section id="terminal" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">terminal</span> Terminal</h1>
                    <div class="terminal-controls">
                        <span id="terminal-status" class="terminal-status"></span>
                    </div>
                </div>
                <div id="terminal-container" class="terminal-wrapper">
                    <div id="terminal-output"></div>
                    <div class="terminal-input-line">
                        <span class="prompt">$</span>
                        <input type="text" id="terminal-input" placeholder="Enter command..." autofocus>
                        <button onclick="sendCommand()" class="icon-btn" title="Run">
                            <span class="material-symbols-outlined">send</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Git -->
            <section id="git" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">commit</span> Git Operations</h1>
                    <button onclick="loadGitHubRepos()" class="icon-btn" title="Refresh">
                        <span class="material-symbols-outlined">refresh</span>
                    </button>
                </div>
                
                <div class="git-panel">
                    <h3><span class="material-symbols-outlined">cloud</span> GitHub Repositories</h3>
                    <div id="github-repos" class="github-repos-grid">
                        <p style="color: var(--text-secondary);">Loading repositories...</p>
                    </div>
                </div>
                
                <div class="git-panel">
                    <h3><span class="material-symbols-outlined">download</span> Clone Repository</h3>
                    <div class="form-row">
                        <div class="input-group flex-1">
                            <span class="material-symbols-outlined">link</span>
                            <input type="text" id="git-clone-url" placeholder="https://github.com/user/repo" onchange="loadBranches()">
                        </div>
                        <div class="input-group flex-1">
                            <span class="material-symbols-outlined">folder</span>
                            <input type="text" id="git-clone-dest" placeholder="/home/deploy/repos/name">
                        </div>
                    </div>
                    <div class="form-row" id="branch-select-row" style="display: none;">
                        <div class="input-group flex-1">
                            <span class="material-symbols-outlined">account_tree</span>
                            <select id="git-clone-branch" multiple>
                                <option value="main" selected>main</option>
                            </select>
                        </div>
                        <label class="hint" style="margin-left: 0.5rem;">Select branches to clone (Ctrl+click for multiple)</label>
                    </div>
                    <div class="form-row">
                        <button onclick="gitClone()" class="btn-primary">
                            <span class="material-symbols-outlined">download</span>
                            Clone Selected Branches
                        </button>
                    </div>
                </div>
                <div class="git-panel">
                    <h3><span class="material-symbols-outlined">info</span> Repository Status</h3>
                    <div class="form-row">
                        <div class="input-group flex-1">
                            <span class="material-symbols-outlined">folder</span>
                            <input type="text" id="git-repo-path" placeholder="/home/deploy/repos/name">
                        </div>
                        <button onclick="gitWorkflowStatus()" class="btn-secondary">
                            <span class="material-symbols-outlined">info</span>
                            Status
                        </button>
                        <button onclick="gitPull()" class="btn-primary">
                            <span class="material-symbols-outlined">download</span>
                            Pull
                        </button>
                    </div>
                    <div class="form-row" style="margin-top: 0.5rem;">
                        <button id="git-commit-btn" onclick="showCommitModal()" class="btn-secondary" style="display: none;">
                            <span class="material-symbols-outlined">check</span>
                            Commit
                        </button>
                        <button onclick="gitPush()" class="btn-secondary">
                            <span class="material-symbols-outlined">upload</span>
                            Push
                        </button>
                        <button onclick="showLocalDevInfo()" class="btn-secondary">
                            <span class="material-symbols-outlined">terminal</span>
                            Local Dev Setup
                        </button>
                    </div>
                    <pre id="git-output"></pre>
                </div>
            </section>

            <!-- Settings -->
            <section id="settings" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">settings</span> Settings</h1>
                </div>
                
                <div class="settings-panel">
                    <h3><span class="material-symbols-outlined">fingerprint</span> Security Keys (Passkeys)</h3>
                    <p class="hint">Use your fingerprint, Face ID, or device PIN for faster, more secure logins.</p>
                    <div id="passkeys-list" class="passkeys-list"></div>
                    <button onclick="registerPasskey()" class="btn-primary">
                        <span class="material-symbols-outlined">add</span>
                        Add New Passkey
                    </button>
                </div>
                
                <div class="settings-panel">
                    <h3><span class="material-symbols-outlined">lock</span> Change Password</h3>
                    <form id="change-password-form">
                        <div class="form-row">
                            <div class="input-group flex-1">
                                <span class="material-symbols-outlined">lock</span>
                                <input type="password" id="new-password" placeholder="New password" required autocomplete="new-password">
                            </div>
                            <div class="input-group flex-1">
                                <span class="material-symbols-outlined">lock</span>
                                <input type="password" id="confirm-password" placeholder="Confirm password" required autocomplete="new-password">
                            </div>
                            <button type="submit" class="btn-primary">
                                <span class="material-symbols-outlined">save</span>
                                Update
                            </button>
                        </div>
                    </form>
                </div>
                
                <div class="settings-panel">
                    <h3><span class="material-symbols-outlined">webhook</span> Webhook Configuration</h3>
                    <p class="hint">Use this secret when setting up GitHub webhooks for auto-deployment.</p>
                    <div class="secret-display">
                        <code id="webhook-secret">Loading...</code>
                        <button onclick="copyWebhookSecret()" class="icon-btn" title="Copy">
                            <span class="material-symbols-outlined">content_copy</span>
                        </button>
                    </div>
                    <p class="hint">Webhook URL: https://opencs.dev:9000/webhook</p>
                </div>
            </section>

            <!-- Security -->
            <section id="security" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">shield</span> Security Report</h1>
                    <button onclick="loadSecurityLog()" class="icon-btn" title="Refresh">
                        <span class="material-symbols-outlined">refresh</span>
                    </button>
                </div>
                
                <div class="security-stats">
                    <div class="stat-card">
                        <span class="material-symbols-outlined">warning</span>
                        <div class="stat-info">
                            <span id="failed-login-count">0</span>
                            <label>Failed Logins (24h)</label>
                        </div>
                    </div>
                    <div class="stat-card">
                        <span class="material-symbols-outlined">block</span>
                        <div class="stat-info">
                            <span id="locked-ip-count">0</span>
                            <label>Locked IPs</label>
                        </div>
                    </div>
                    <div class="stat-card">
                        <span class="material-symbols-outlined">verified_user</span>
                        <div class="stat-info">
                            <span id="known-ip-count">0</span>
                            <label>Known IPs</label>
                        </div>
                    </div>
                </div>

                <div class="security-panel">
                    <h3><span class="material-symbols-outlined">history</span> Recent Login Attempts</h3>
                    <table class="security-table" id="security-log-table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>IP Address</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Details</th>
                            </tr>
                        </thead>
                        <tbody id="security-log-body">
                            <tr><td colspan="5" style="text-align:center;">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="security-panel">
                    <h3><span class="material-symbols-outlined">block</span> Locked IPs</h3>
                    <p class="hint">These IPs are locked out. They can only regain access by verifying via GitHub OAuth.</p>
                    <div id="locked-ips-list" class="ip-list">
                        <p style="color: var(--text-secondary);">No locked IPs</p>
                    </div>
                </div>

                <div class="security-panel">
                    <h3><span class="material-symbols-outlined">verified_user</span> Known IPs</h3>
                    <p class="hint">These IPs have been verified and won't require GitHub verification.</p>
                    <div id="known-ips-list" class="ip-list">
                        <p style="color: var(--text-secondary);">No known IPs</p>
                    </div>
                </div>
            </section>

            <!-- Developer Tools -->
            <section id="devtools" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">handyman</span> Developer Tools</h1>
                    <button onclick="showAddToolModal()" class="btn-primary">
                        <span class="material-symbols-outlined">add</span>
                        Add Tool
                    </button>
                </div>
                
                <div class="tools-search">
                    <div class="input-group">
                        <span class="material-symbols-outlined">search</span>
                        <input type="text" id="tools-search" placeholder="Search tools..." oninput="filterTools()">
                    </div>
                    <select id="tools-category" onchange="filterTools()">
                        <option value="">All Categories</option>
                        <option value="Text">Text</option>
                        <option value="Data">Data</option>
                        <option value="Security">Security</option>
                        <option value="API">API</option>
                        <option value="Design">Design</option>
                        <option value="DevOps">DevOps</option>
                        <option value="Docs">Docs</option>
                        <option value="Git">Git</option>
                        <option value="Web">Web</option>
                        <option value="NPM">NPM</option>
                        <option value="Code">Code</option>
                        <option value="AI">AI & ML</option>
                        <option value="Database">Database</option>
                        <option value="Testing">Testing</option>
                        <option value="Hosting">Hosting</option>
                        <option value="Utility">Utility</option>
                    </select>
                </div>
                
                <div id="devtools-grid" class="tools-grid">
                    <p style="color: var(--text-secondary);">Loading tools...</p>
                </div>
            </section>

            <!-- Team Management -->
            <section id="team" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">group</span> Team Management</h1>
                    <button onclick="showAddMemberModal()" class="btn-primary">
                        <span class="material-symbols-outlined">person_add</span>
                        Add Member
                    </button>
                </div>
                
                <div id="team-members" class="team-grid">
                    <p style="color: var(--text-secondary);">Loading team...</p>
                </div>
            </section>

            <!-- Contacts -->
            <section id="contacts" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">mail</span> Contact Submissions</h1>
                    <button onclick="loadContacts()" class="btn-secondary">
                        <span class="material-symbols-outlined">refresh</span>
                        Refresh
                    </button>
                </div>
                
                <div id="contacts-list" class="contacts-list">
                    <p style="color: var(--text-secondary);">Loading contacts...</p>
                </div>
            </section>

            <!-- Homepage Customization -->
            <!-- Gallery Management -->
            <section id="gallery" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">photo_library</span> Gallery Management</h1>
                    <div class="header-actions">
                        <button onclick="showAddRepoToGallery()" class="btn-secondary">
                            <span class="material-symbols-outlined">code</span>
                            Add from Repos
                        </button>
                        <button onclick="showUploadToGallery()" class="btn-primary">
                            <span class="material-symbols-outlined">upload</span>
                            Upload Image
                        </button>
                    </div>
                </div>
                
                <div class="gallery-grid" id="gallery-items">
                    <p style="color: var(--text-secondary);">Loading gallery items...</p>
                </div>
            </section>

            <!-- Page Editor -->
            <section id="page-editor" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">edit_document</span> Page Editor</h1>
                    <div class="header-actions" id="editor-actions" style="display: none;">
                        <button onclick="toggleEditMode()" class="btn-secondary" id="edit-mode-toggle">
                            <span class="material-symbols-outlined">edit</span>
                            Enable Edit Mode
                        </button>
                        <button onclick="savePageEdits()" class="btn-primary" id="save-edits-btn" disabled>
                            <span class="material-symbols-outlined">save</span>
                            Save Changes
                        </button>
                    </div>
                </div>
                
                <div class="editor-page-selector">
                    <h3>Select a page to edit:</h3>
                    <div class="page-cards" id="editable-pages">
                        <div class="page-card" onclick="loadPageForEditing('/')">
                            <span class="material-symbols-outlined">home</span>
                            <span>Homepage</span>
                        </div>
                        <div class="page-card" onclick="loadPageForEditing('/tools')">
                            <span class="material-symbols-outlined">handyman</span>
                            <span>Dev Tools</span>
                        </div>
                        <div class="page-card" onclick="loadPageForEditing('/gallery')">
                            <span class="material-symbols-outlined">photo_library</span>
                            <span>Gallery</span>
                        </div>
                    </div>
                    <div id="team-page-cards" class="page-cards" style="margin-top: 1rem;">
                        <!-- Team member pages loaded dynamically -->
                    </div>
                </div>
                
                <div class="editor-frame-container" id="editor-frame-container" style="display: none;">
                    <div class="editor-toolbar">
                        <button onclick="closePageEditor()" class="btn-secondary">
                            <span class="material-symbols-outlined">arrow_back</span>
                            Back to Pages
                        </button>
                        <span class="editor-page-name" id="editor-page-name"></span>
                        <div class="editor-hint" id="edit-hint">
                            <span class="material-symbols-outlined">info</span>
                            Click elements in the page to edit them
                        </div>
                    </div>
                    <iframe id="page-editor-iframe" class="page-editor-iframe"></iframe>
                </div>
            </section>

            <section id="homepage" class="section">
                <div class="section-header">
                    <h1><span class="material-symbols-outlined">home</span> Homepage Customization</h1>
                    <button onclick="saveHomepage()" class="btn-primary">
                        <span class="material-symbols-outlined">save</span>
                        Save Changes
                    </button>
                </div>
                
                <div class="settings-panel">
                    <h3><span class="material-symbols-outlined">title</span> Site Identity</h3>
                    <div class="form-group">
                        <label>Site Title</label>
                        <input type="text" id="homepage-title" placeholder="OpenCS">
                    </div>
                    <div class="form-group">
                        <label>Tagline</label>
                        <input type="text" id="homepage-tagline" placeholder="Open-source tools by the community">
                    </div>
                </div>
                
                <div class="settings-panel">
                    <h3><span class="material-symbols-outlined">palette</span> Theme Colors</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Primary Color</label>
                            <div class="color-input">
                                <input type="color" id="homepage-color-primary" value="#22c55e">
                                <input type="text" id="homepage-color-primary-hex" value="#22c55e" placeholder="#22c55e">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Background Color</label>
                            <div class="color-input">
                                <input type="color" id="homepage-color-bg" value="#0a0a0f">
                                <input type="text" id="homepage-color-bg-hex" value="#0a0a0f" placeholder="#0a0a0f">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-panel">
                    <h3><span class="material-symbols-outlined">visibility</span> Team Display</h3>
                    <p class="hint">Control which team members and repos appear on the homepage.</p>
                    <div id="homepage-team-config">
                        <p style="color: var(--text-secondary);">Add team members first...</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <div id="modal-overlay" class="modal-overlay hidden" onclick="if(event.target===this)closeModal()">
        <div id="modal" class="modal">
            <div class="modal-header">
                <h3 id="modal-title"></h3>
                <button class="close-btn" onclick="closeModal()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div id="modal-content" class="modal-body"></div>
        </div>
    </div>

    <!-- GitHub Repo Browser Modal -->
    <div id="repo-browser-modal" class="modal-overlay hidden" onclick="if(event.target===this)closeRepoBrowser()">
        <div class="modal repo-browser-modal">
            <div class="modal-header">
                <div class="repo-browser-nav">
                    <button onclick="repoBrowserBack()" class="icon-btn" id="repo-back-btn" disabled>
                        <span class="material-symbols-outlined">arrow_back</span>
                    </button>
                    <h3 id="repo-browser-title">Repository</h3>
                </div>
                <button class="close-btn" onclick="closeRepoBrowser()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div id="repo-browser-path" class="repo-browser-path"></div>
            <div id="repo-browser-content" class="modal-body repo-browser-content">
                <p style="color: var(--text-secondary);">Loading...</p>
            </div>
        </div>
    </div>

    <!-- Page Settings Modal -->
    <div id="page-settings-modal" class="modal-overlay hidden" onclick="if(event.target===this)closePageSettings()">
        <div class="modal">
            <div class="modal-header">
                <h3>Page Settings</h3>
                <button class="close-btn" onclick="closePageSettings()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="page-settings-id">
                <div class="form-group">
                    <label>Page Name</label>
                    <input type="text" id="page-settings-name" placeholder="My Page">
                </div>
                <div class="form-group">
                    <label>Page URL</label>
                    <input type="text" id="page-settings-url" placeholder="https://example.com" readonly>
                </div>
                <div class="form-group">
                    <label>Favicon</label>
                    <div class="file-upload-row">
                        <img id="page-favicon-preview" class="favicon-preview" src="" alt="">
                        <input type="file" id="page-favicon-input" accept="image/*" onchange="previewFavicon(this)">
                        <button onclick="document.getElementById('page-favicon-input').click()" class="btn-secondary">
                            <span class="material-symbols-outlined">upload</span>
                            Upload Favicon
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Social Banner (Open Graph)</label>
                    <div class="file-upload-row">
                        <img id="page-banner-preview" class="banner-preview" src="" alt="">
                        <input type="file" id="page-banner-input" accept="image/*" onchange="previewBanner(this)">
                        <button onclick="document.getElementById('page-banner-input').click()" class="btn-secondary">
                            <span class="material-symbols-outlined">upload</span>
                            Upload Banner
                        </button>
                    </div>
                    <p class="hint">Recommended size: 1200x630px for social media previews</p>
                </div>
                <div class="form-actions">
                    <button onclick="savePageSettings()" class="btn-primary">
                        <span class="material-symbols-outlined">save</span>
                        Save Changes
                    </button>
                    <button onclick="deletePage()" class="btn-danger">
                        <span class="material-symbols-outlined">delete</span>
                        Delete Page
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- File Editor Modal -->
    <div id="editor-modal" class="modal-overlay hidden">
        <div class="modal editor-modal">
            <div class="modal-header">
                <h3 id="editor-title">Edit File</h3>
                <div class="editor-actions">
                    <button onclick="saveFile()" class="btn-primary">
                        <span class="material-symbols-outlined">save</span>
                        Save
                    </button>
                    <button onclick="closeEditor()" class="btn-secondary">
                        <span class="material-symbols-outlined">close</span>
                        Close
                    </button>
                </div>
            </div>
            <div class="modal-body">
                <textarea id="file-editor"></textarea>
            </div>
        </div>
    </div>

    <!-- Toast notifications -->
    <div id="toast-container"></div>

    <!-- Custom Context Menu -->
    <div id="context-menu" class="context-menu hidden">
        <ul id="context-menu-items"></ul>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
